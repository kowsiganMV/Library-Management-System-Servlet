
<web-app>
    <resource-ref>
        <description>Postgres DB</description>
        <res-ref-name>jdbc/mydb</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>

    <!-- Listeners -->
    <listener>
        <listener-class>com.example.Listeners.DBConnectionListener</listener-class>
    </listener>


    <!-- Filters -->
    <filter>
        <filter-name>SignInFilter</filter-name>
        <filter-class>com.example.Filters.SignInFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>SignInFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <welcome-file-list>
        <welcome-file>/assets/jsp/SignIn.jsp</welcome-file>
    </welcome-file-list>

    <!-- Context Parameters -->
    <!--
    <context-param>
        <param-name>DB_URI</param-name>
        <param-value>jdbc:postgresql://localhost:5432/</param-value>
    </context-param>
    <context-param>
        <param-name>DB_USERNAME</param-name>
        <param-value>postgres</param-value>
    </context-param>
    <context-param>
        <param-name>DB_PASSWORD</param-name>
        <param-value>password</param-value>
    </context-param>
    -->

    <!-- Servlet Handling -->

    <servlet>
        <servlet-name>Index</servlet-name>
        <jsp-file>/index.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>Index</servlet-name>
        <url-pattern>/index</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>SignIn</servlet-name>
        <servlet-class>com.example.SignIn</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>SignIn</servlet-name>
        <url-pattern>/signin</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>SignOff</servlet-name>
        <servlet-class>com.example.SignOff</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>SignOff</servlet-name>
        <url-pattern>/logout</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>SignUp</servlet-name>
        <servlet-class>com.example.UserServlets.UserSignUpServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>SignUp</servlet-name>
        <url-pattern>/signup</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>AdminSignUp</servlet-name>
        <url-pattern>/admin_signup</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>AdminSignUp</servlet-name>
        <servlet-class>com.example.AdminServlets.AdminSignUpServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Home</servlet-name>
        <servlet-class>com.example.UserServlets.HomeServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Home</servlet-name>
        <url-pattern>/home</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>Main</servlet-name>
        <servlet-class>com.example.Main</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Main</servlet-name>
        <url-pattern>/test</url-pattern>
    </servlet-mapping>


    <!-- Error Handling -->
    <error-page>
        <exception-type>java.lang.Exception</exception-type>
        <location>/assets/jsp/Error.jsp</location>
    </error-page>

    <error-page>
        <error-code>404</error-code>
        <location>/assets/jsp/404Error.jsp</location>
    </error-page>

    <session-config>

        <session-timeout>30</session-timeout>

        <cookie-config>
            <name>JSESSIONID</name>
            <path>/</path>
            <http-only>true</http-only>
            <secure>true</secure>
            <max-age>3600</max-age>
        </cookie-config>

        <tracking-mode>COOKIE</tracking-mode>

    </session-config>

</web-app>
        